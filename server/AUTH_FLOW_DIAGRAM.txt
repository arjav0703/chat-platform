```
WebSocket Authentication Flow Diagram
======================================

Client                          Server                      Database
  |                               |                             |
  |-------- Connect WS ---------->|                             |
  |                               |                             |
  |<------ Connection Open -------|                             |
  |                               |                             |
  |                               |                             |
  |--{ type: "auth",              |                             |
  |    email: "user@email.com",   |                             |
  |    password: "pass123" }----->|                             |
  |                               |                             |
  |                               |---- Verify User & Hash ---->|
  |                               |                             |
  |                               |<---- User Data (id, name) --|
  |                               |                             |
  |                               | ✓ Authentication Success    |
  |<--{ status: "authenticated",  |                             |
  |     info: "Welcome, Name!" }--|                             |
  |                               |                             |
  |                               | Store authenticated user    |
  |                               | in connection context       |
  |                               |                             |
  |--{ type: "chat",              |                             |
  |    content: "Hello!" }------->|                             |
  |                               |                             |
  |                               |---- Store Message --------->|
  |                               |                             |
  |                               | Broadcast to all clients    |
  |<--{ status: "message",        |                             |
  |     message: {...} }----------|                             |
  |                               |                             |

Failed Authentication Flow:
===========================

Client                          Server                      Database
  |                               |                             |
  |-------- Connect WS ---------->|                             |
  |                               |                             |
  |<------ Connection Open -------|                             |
  |                               |                             |
  |--{ type: "auth",              |                             |
  |    email: "wrong@email.com",  |                             |
  |    password: "wrong" }------->|                             |
  |                               |                             |
  |                               |---- Verify User & Hash ---->|
  |                               |                             |
  |                               |<---- No Match Found --------|
  |                               |                             |
  |                               | ✗ Authentication Failed     |
  |<--{ status: "error",          |                             |
  |     info: "Auth failed..." }--|                             |
  |                               |                             |
  |<------ Connection Close ------|                             |
  |                               |                             |

Security Notes:
===============
• First message MUST be authentication
• Password is hashed with SHA256 before DB comparison
• Failed auth = immediate connection closure
• Authenticated user info stored in connection context
• All subsequent messages use authenticated user data
• No way to send messages without valid credentials
```
